<div *ngIf="!disabled"
     class="col{{((chat.selectedCommand$ | async)?.params?.length || 0) + 1}}">
  <ng-select [ngModel]="chat.selectedCommand$ | async"
             (change)="focusChat(); chat.selectedCommand$.next($event)"
             appendTo="body"
             [items]="chat.commands$ | async"
             [clearable]="false"
             bindLabel="title">
    <ng-template ng-option-tmp
                 let-item="item">
      <p id="options"
         title="{{item.help}}">{{item.title}}</p>
    </ng-template>
  </ng-select>

  <ng-container *ngFor="let param of (chat.selectedCommand$ | async)?.params">
    <ng-container [ngSwitch]="param.name">
      <q-name-search *ngSwitchCase="'name'"
                     [onlineOnly]="true"
                     [matInput]="false"
                     [clearOnFocus]="false"
                     [(value)]="param.value"></q-name-search>
      <q-name-search *ngSwitchCase="'nameany'"
                     [matInput]="false"
                     [clearOnFocus]="false"
                     [(value)]="param.value"></q-name-search>

      <span *ngSwitchCase="'new'">new</span>

      <input *ngSwitchDefault
             [id]="param.name || 'message'"
             class="textinput"
             autocomplete="off"
             maxlength="200"
             name="value"
             [placeholder]="param.name"
             (keyup)="handleKey($event)"
             [(ngModel)]="param.value">
    </ng-container>
  </ng-container>
  <button mat-button
          id="send"
          (click)="sendInput($event)">Send</button>
</div>
