<span *ngIf="message.from !== ws.user.name; else you"
  [matMenuTriggerFor]="nameMenu">
  <span [class.friend]="message.friend"
    [class.blocked]="message.blocked">{{message.from}}</span>
  <span *ngIf="message.copy">({{message.copy}})</span>
</span>

<ng-template #you>
  <span class="you" title="you">{{message.from}}</span>
  <span *ngIf="message.copy">({{message.copy}})</span>
</ng-template>

<mat-menu #nameMenu="matMenu">
  <ng-template matMenuContent>
    <button mat-menu-item (click)="chat.sendTell(message.from)">
      Send Tell
    </button>
    <button *ngIf="!message.friend" mat-menu-item (click)="add(message.from)">
      Add friend
    </button>
    <button *ngIf="!message.blocked; else unblockButton" mat-menu-item
      (click)="block(message.from)">
      Block
    </button>
    <ng-template #unblockButton>
      <button mat-menu-item (click)="unblock(message.from)">
        Unblock
      </button>
    </ng-template>
  </ng-template>
</mat-menu>
