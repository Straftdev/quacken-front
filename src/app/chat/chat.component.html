<div id="chatbox">
  <div id="output">
    <div #output id="textbox">
      <p *ngFor="let m of chat.messages"
        [style.backgroundColor]="colors[m.type]">
        <ng-container *ngIf="!m.blocked" [ngSwitch]="m.type">
          <span *ngSwitchCase="0">{{m.message}}</span>
          <span *ngSwitchCase="1" [innerHTML]="m.message"></span>

          <span *ngSwitchCase="2">
            <app-name [message]="m"></app-name>
            says "{{m.message}}"
          </span>

          <span *ngSwitchCase="3">
            <app-name [message]="m"></app-name>
            {{m.message}}
          </span>

          <span *ngSwitchCase="4">
            You told
            <app-name [message]="m"></app-name>
            "{{m.message}}"
          </span>

          <span *ngSwitchCase="5">
            <app-name [message]="m"></app-name>
            tells you
            "{{m.message}}"
          </span>

          <span *ngSwitchCase="6">
            The following commands are available in this lobby:<br>
            <span *ngFor="let c of m.message" class="command"
              (click)="clickCommand(c)" title="Send Command">
              {{c.base}}
              <ng-container *ngIf="c.params"> {{c.params}}</ng-container> -
              {{c.help}}<br>
            </span>
          </span>

          <span *ngSwitchCase="7">
            <app-name [message]="m" offline="true"></app-name> was last seen
            {{m.ago}} ({{m.time}}).
          </span>
        </ng-container>
      </p>
    </div>

    <div id="icons">
      <button mat-icon-button (click)="fs.open = true; fs.selected = 'lobby'">
        <mat-icon>group</mat-icon>
      </button>
      <button mat-icon-button (click)="fs.open = true; fs.selected = 'invite'"
        [class.highlight]="fs.invites.length">
        <mat-icon>notifications</mat-icon>
      </button>
      <button mat-icon-button (click)="ss.open = !ss.open">
        <mat-icon>settings</mat-icon>
      </button>
    </div>
  </div>

  <form (submit)="sendInput($event)">
    <input #inputEl id="textinput" autocomplete="off" maxlength="200"
      name="value" (keyup)="handleKey($event)" [(ngModel)]="chat.value">
  </form>
</div>
