<div class="flex">
  <span id="searchLabel">Search Map: </span>
  <input type="text"
         placeholder="1v1"
         (keyup.enter)="filter()"
         (blur)="filter()"
         [(ngModel)]="search">
  <button mat-raised-button
          color="accent"
          (click)="filter()">Search</button>
  <button mat-raised-button
          color="accent"
          (click)="openFilterWindow()">Filter</button>
  <mat-form-field>
    <mat-label>Sort by:</mat-label>
    <mat-select [(value)]="selectedSortOption"
                (selectionChange)="sort($event.value)">
      <mat-option *ngFor="let option of sortList"
                  [value]="option">{{option}}</mat-option>
    </mat-select>
  </mat-form-field>
</div>

<div class="item">
  <mat-chip-listbox>
    <mat-chip *ngFor="let tag of selectedFilters"
              [removable]="true"
              (removed)="toggleTag(tag)">
      <ng-container *ngIf="+tag else string">
        <q-rating [rating]="+tag"
                  [forTags]="true"></q-rating>
      </ng-container>
      <ng-template #string>{{tag}}</ng-template>
      <mat-icon matChipRemove>cancel</mat-icon>
    </mat-chip>
  </mat-chip-listbox>
</div>

<div class="item">
  <button mat-raised-button
          color="accent"
          [disabled]="(ss.admin$ | async) === false"
          (click)="selectMap(-1)"
          matTooltip="Random User Map">Random</button>
</div>

<cdk-virtual-scroll-viewport id="maps"
                             *ngrxLet="selectedMap.stream as selectedMap"
                             [itemSize]="273"
                             [minBufferPx]="600"
                             [maxBufferPx]="900">
  <q-map-card *cdkVirtualFor="let m of maplist"
              [map]="m"
              [width]="mapWidth"
              [height]="mapHeight"
              [safeZone]="safeZone"
              [disabled]="(ss.admin$ | async) === false"
              [description]="m.description"
              [class.selected]="m.id === selectedMap"
              (selectedMap)="selectMap($event)"></q-map-card>
</cdk-virtual-scroll-viewport>
