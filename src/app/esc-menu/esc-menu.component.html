<button mat-icon-button
        id="toggleesc"
        (click)="es.toggle()"
        matTooltip="Menu (esc)">
  <mat-icon [ngStyle]="{
            'border':'1px solid black',
            'border-radius':'4px',
            'color':'white', 
            'background-color':'rgb(67, 67, 67)',
            'width':'30px'
        }">menu</mat-icon>
</button>
<div id="backgroundframe"
     *ngrxLet="es.open$ as open"
     [class.open]="es.open$ | async">
  <div id="side-menu">
    <div id="menuButtons">
      <a mat-button
         [disabled]="!open"
         class="discord"
         href="https://discord.gg/UVAPZFYrUW"
         target="_blank"
         matTooltip="Open Discord Server"></a>
      <a mat-button
         id="lobbyButton"
         href="/#/list"
         matTooltip="Return to Lobby"
         [disabled]="!open"
         *ngIf="es.lobbyContext || es.lobbyComponent"
         class="action">
        <mat-icon>cancel</mat-icon>
      </a>
      <button mat-button
              id="logoutButton"
              matTooltip="Logout"
              [disabled]="!open"
              class="action"
              (click)="logout()">
        <mat-icon [ngStyle]="{'color':'red'}">power_settings_new</mat-icon>
      </button>
    </div>

    <mat-tab-group id="main-tab"
                   [mat-stretch-tabs]="false"
                   (selectedIndexChange)="es.activeTab$.next($event)"
                   [selectedIndex]="es.activeTab$ | async">
      <mat-tab label="LOBBY"
               [disabled]="!open">
        <mat-tab-group id="sub-tab"
                       [mat-stretch-tabs]="false"
                       [(selectedIndex)]="es.lobbyTab"
                       mat-align-tabs="center">
          <mat-tab label="Lobby">
            <mat-card>
              <mat-card-content>
                <q-player-list [players]="(fs.lobby$ | async) || []"></q-player-list>
              </mat-card-content>
            </mat-card>
            <ng-container *ngComponentOutlet="es.lobbyComponent"></ng-container>
          </mat-tab>
          <mat-tab label="Settings"
                   *ngIf="ss.lAdminSettings.length">
            <mat-card id="lobbySettings"
                      *ngIf="es.open$ | async">
              <h4>Lobby Owner Settings</h4>
              <div class="settings">
                <q-setting *ngFor="let s of ss.lAdminSettings"
                           [name]="s"></q-setting>
              </div>
            </mat-card>
          </mat-tab>
          <mat-tab label="Map Selection"
                   *ngIf="ss.showMapChoice">
            <q-map-list [visible]="es.lobbyTab === 2 && (es.open$ | async) === true"
                        [rankArea]="ss.rankArea"></q-map-list>
          </mat-tab>
        </mat-tab-group>
      </mat-tab>

      <mat-tab label="PROFILE"
               [disabled]="!open">
        <ng-container *ngComponentOutlet="ProfileComponent"></ng-container>
      </mat-tab>

      <mat-tab label="INVENTORY"
               *ngIf="ws.user?.id"
               [disabled]="!open">
        <ng-container *ngComponentOutlet="InventoryComponent"></ng-container>
      </mat-tab>

      <mat-tab label="SETTINGS"
               [disabled]="!open">
        <ng-container *ngComponentOutlet="SettingsComponent"></ng-container>
      </mat-tab>
    </mat-tab-group>

    <div id="chatframe"
         *ngIf="open">
      <q-chat [disabled]="!open"></q-chat>
    </div>
  </div>
</div>
