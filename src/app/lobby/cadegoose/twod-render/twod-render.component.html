<div #frame
     class="noselect"
     id="background"
     (wheel)="scroll($event)"
     oncontextmenu="event.preventDefault();"
     [style.backgroundSize]="mapScale*64 + 'px'"
     [style.backgroundPosition]="'calc(50vw + ' + (drag.offsetX - getXOff(myBoat))*mapScale + 'px) calc(50vh + ' + (drag.offsetY - getYOff(myBoat))*mapScale + 'px)'">
  <!-- mapframe receives the offset transform, map receives the rotate transform.
 	This allows them to be altered independent of each other -->
  <div id="mapcenter">
    <div [style.transform]="'scale(' + mapScale + ')'">
      <div #drag="qDrag"
           [qDrag]="frame"
           [scale]="mapScale">
        <div [style.transform]="'translate(50%, 50%) translate(' + -getXOff(myBoat) + 'px, ' + -getYOff(myBoat) + 'px)'">
          <canvas id="mapCanvas"
                  [width]="getWidth()"
                  [height]="getHeight()"
                  #canvas></canvas>

          <q-gu-boats [hoveredTeam]="hoveredTeam"
                      [getX]="getX"
                      [getY]="getY">
          </q-gu-boats>
          <canvas id="flagMapCanvas"
                  [width]="getWidth()"
                  [height]="getHeight()"
                  #flagCanvas></canvas>
        </div>
      </div>
    </div>
  </div>
</div>
